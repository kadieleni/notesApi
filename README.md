Notes API

A Spring Boot REST API for managing patient notes with tenant-awareness.
Each request must include a tenant identifier in the HTTP header (X-Tenant-Id).
The API enforces strict tenant isolation: notes created under one tenant cannot be accessed or modified by another. Cross-tenant access attempts result in 403 Forbidden.

Tech Stack

Spring Boot 3.x
Spring Data JPA
H2 Database
Swagger / OpenAPI
JUnit 5 & Mockito

Setup & Run

1. Clone the repository
	https://github.com/kadieleni/notesApi.git
	cd notesApi
	

2.Build the project
	mvn clean install

3. Run the application
	mvn spring-boot:run

4. Access Swagger UI
	http://localhost:8080/swagger-ui/index.html


API Endpoints

Create Note
POST /notes
Requires header: X-Tenant-Id
Body: patientId, author, text
* Id is autogenerated, TenantId is populated from the header X-Tenant-Id and CreatedAt is captured by the System 

Get Notes by Patient
GET /notes?patientId={id}
Requires header: X-Tenant-Id

Update Note
PUT /notes/{id}
Requires header: X-Tenant-Id
Only the creating tenant can update.

Delete Note
DELETE /notes/{id}
Requires header: X-Tenant-Id
Only the creating tenant can delete.

Examples

* Create a Note
  curl -X POST "http://localhost:8080/notes" \
  -H "Content-Type: application/json" \
  -H "X-Tenant-Id: tenant1" \
  -d '{
        "patientId": 123,
        "author": "Dr. Smith",
        "text": "Patient is recovering well."
      }'

Response:
{
  "id": 1,
  "tenantId": "tenant1",
  "patientId": 123,
  "author": "Dr. Smith",
  "text": "Patient is recovering well.",
  "createdAt": "2025-09-14T10:00:00Z"
}

* Get Notes
curl -X GET "http://localhost:8080/notes?patientId=123" \
  -H "X-Tenant-Id: tenant1"

Response:
[
  {
    "id": 1,
    "tenantId": "tenant1",
    "patientId": 123,
    "author": "Dr. Smith",
    "text": "Patient is recovering well.",
    "createdAt": "2025-09-14T10:00:00Z"
  }
]

* Forbidden Delete by Another Tenant
curl -X DELETE "http://localhost:8080/notes/1" \
  -H "X-Tenant-Id: tenant2"

Response:
{
  "status": 403,
  "error": "Forbidden",
  "message": "Prohibited to get notes for patient id: 1",
  "timestamp": "2025-09-14T20:50:57.196891Z"
}
